<html>
  <!-- #region Head -->
  <head>
    <!-- #region Style -->
    <style>
      head,
      body {
        font-size: 120%;
        overflow-y: scroll;
        color: #ffffff;
      }
      #title {
        font-size: 200%;
        font-weight: 400;
        flex: 1;
        color: #0000ff;
      }
      #description {
        font-size: 100%;
        flex: 1;
        color: #ffffff;
      }
      form { display: table; }
      p { display: table-row; }
      label, input {
        display: table-cell;
        font-size: 120%;
      }
      checkbox {
        width: 120%;
        height: 120%;
      }
    </style>
    <!-- #endregion Style -->
    <!-- #region meta -->
    <meta
      name="autotoolswebscreen"
      type="variablejs"
      group="UI Info"
      id="titleFromTasker"
      label="Title"
      description="Title to show at the top."
      hint="YouTube"
    />
    <meta
      name="autotoolswebscreen"
      type="variablejs"
      group="UI Info"
      id="descriptionFromTasker"
      label="Description"
      description="(optional) Description to show at the top."
      hint="Description of the video."
    />
    <meta
      name="autotoolswebscreen"
      type="variablejs"
      group="UI Info"
      id="contentFromTasker"
      label="Form Content"
      description="A form to show in the web screen in special format."
      hint="Text:TEXT,Bool:BOOL,Int:INT"
    />
    <meta
      name="autotoolswebscreen"
      type="variablejs"
      group="UI Info"
      id="valuesFromTasker"
      label="Form Values"
      description="Values to prefill the form with. Comma separated."
      hint="value1,true,3"
    />
    <!-- #endregion meta -->
    <div id="title">Untitled 15</div>
    <div id="description"></div>
  </head>
  <!-- #endregion Head -->
  <!-- #region Body -->
  <body>
    <div id="header"></div><br>
    <form id="content"></form><br>
    <div id="footer"></div>
  </body>
  <!-- #endregion Body -->
  <!-- #region JS -->
  <script type="text/javascript">
    var br = document.createElement("span");
    br.innerHTML = "<br>";
    var titleElement = document.querySelector("#title");
    var descriptionElement = document.querySelector("#description");
    var headerElement = document.querySelector("#header");
    var contentElement = document.querySelector("#content");
    var footerElement = document.querySelector("#footer");

    if (AutoTools.isSet("titleFromTasker")) {
      titleElement.innerHTML = titleFromTasker;
      document.title = titleFromTasker;
    }

    if (AutoTools.isSet("descriptionFromTasker")) {
      descriptionElement.innerHTML = descriptionFromTasker;
    }

    if (AutoTools.isSet("contentFromTasker")) {
      // Content from tasker is an array separated by commas
      var items = contentFromTasker.split(",");
      items.forEach(function (item) {
        // Separate the string into name and type
        var [name, type] = item.split(":");
        // contentElement.appendChild(br.cloneNode(true));
        // Create a <p> element for each item
        var pElement = document.createElement("p");
        var labelElement = document.createElement("label");
        labelElement.innerHTML = name + ":";
        pElement.appendChild(labelElement);
        var inputElement = document.createElement("input");
        switch (type) {
          case "TEXT":
            // Create a <div> element for TEXT type
            inputElement.type = "text";
            inputElement.placeholder = "text";
            break;
          case "BOOL":
            // Create a <div> element for BOOL type
            inputElement.type = "checkbox";
            break;
          case "INT":
            // Create a <div> element for INT type
            inputElement.type = "number";
            break;
          default:
            // Handle unknown type
            inputElement.type = "text";
            inputElement.placeholder =
              type + " is not a valid type. Please use TEXT, BOOL, or INT.";
            break;
        }
        inputElement.id = name;
        inputElement.name = name;
        pElement.appendChild(inputElement);
        contentElement.appendChild(pElement);
      });
      var submitButton = document.createElement("button");
      submitButton.innerHTML = "Submit";
      submitButton.onclick = function () {
        var data = [];
        items.forEach(function (item) {
          var [name, type] = item.split(":");
          var inputElement = document.getElementById(name);
          data.push(inputElement.value);
        });
        AutoTools.sendCommand("InputValues=:=" + data);
      };
      // contentElement.appendChild(br.cloneNode(true));
      contentElement.appendChild(submitButton);
    }
    if (AutoTools.isSet("valuesFromTasker")) {
      var values = valuesFromTasker.split(",");
      var items = contentFromTasker.split(",");
      items.forEach(function (item, index) {
        var [name, type] = item.split(":");
        var inputElement = document.getElementById(name);
        if (typeof arrayName[index] === "undefined") {
        } else {
          if (inputElement.type === "checkbox") {
            inputElement.checked = values[index] === "true";
          } else {
            inputElement.value = values[index];
          }
        }
      });
    }
  </script>
  <!-- #endregion JS -->
</html>

<html>
  <!-- #region Head -->
  <head>
    <!-- #region Style -->
    <style>
      head,
      body {
        overflow-y: scroll;
        color: #ffffff;
      }
      #title {
        font-size: 200%;
        font-weight: 400;
        flex: 1;
        color: #0000ff;
      }
      #description {
        flex: 1;
        color: #ffffff;
      }
    </style>
    <!-- #endregion Style -->
    <!-- #region meta -->
    <meta
      name="autotoolswebscreen"
      type="variablejs"
      group="UI Info"
      id="titleFromTasker"
      label="Title"
      description="Title to show at the top."
      hint="YouTube"
    />
    <meta
      name="autotoolswebscreen"
      type="variablejs"
      group="UI Info"
      id="descriptionFromTasker"
      label="Description"
      description="(optional) Description to show at the top."
      hint="Description of the video."
    />
    <meta
      name="autotoolswebscreen"
      type="variablejs"
      group="UI Info"
      id="contentFromTasker"
      label="Form Content"
      description="A form to show in the web screen in special format."
      hint="Text:TEXT,Bool:BOOL,Int:INT"
    />
    <!-- #endregion meta -->
    <div id="title">Untitled 8</div>
    <div id="description"></div>
  </head>
  <!-- #endregion Head -->
  <!-- #region Body -->
  <body>
    <div id="content"></div>
  </body>
  <!-- #endregion Body -->
  <!-- #region JS -->
  <script type="text/javascript">
    var br = document.createElement("span");
    br.innerHTML = "<br><br>";
    var titleElement = document.querySelector("#title");
    if (AutoTools.isSet("titleFromTasker")) {
      titleElement.innerHTML = titleFromTasker;
      document.title = titleFromTasker;
    }

    var descriptionElement = document.querySelector("#description");
    if (AutoTools.isSet("descriptionFromTasker")) {
      descriptionElement.innerHTML = descriptionFromTasker;
    }

    var contentElement = document.querySelector("#content");
    if (AutoTools.isSet("contentFromTasker")) {
      // Content from tasker is an array separated by commas
      var items = contentFromTasker.split(",");
      items.forEach(function (item) {
        // Separate the string into name and type
        var [name, type] = item.split(":");
        document.body.appendChild(br.cloneNode(true));
        // Create a <div> element for each item
        var divElement = document.createElement("div");
        var lableElement = document.createElement("label");
        lableElement.innerHTML = name + ":";
        divElement.appendChild(lableElement);
        var inputElement = document.createElement("input");
        switch (type) {
          case "TEXT":
            // Create a <div> element for TEXT type
            inputElement.type = "text";
            inputElement.hint = "text";
            break;
          case "BOOL":
            // Create a <div> element for BOOL type
            inputElement.type = "checkbox";
            break;
          case "INT":
            // Create a <div> element for INT type
            inputElement.type = "number";
            break;
          default:
            // Handle unknown type
            inputElement.name = "unknownType";
            inputElement.type = "text";
            inputElement.value =
              type +
              " is not a valid type for " +
              name +
              ". Please use TEXT, BOOL, or INT.";
            break;
        }
        inputElement.id = name;
        inputElement.name = name;
        divElement.appendChild(inputElement);
        contentElement.appendChild(divElement);
      });
      var submitButton = document.createElement("button");
      submitButton.innerHTML = "Submit";
      submitButton.onclick = function () {
        var data = [];
        items.forEach(function (item) {
          var [name, type] = item.split(":");
          var inputElement = document.getElementById(name);
          data.push(inputElement.value);
        });
        AutoTools.sendCommand("InputValues=:=" + data);
      };
    }
  </script>
  <!-- #endregion JS -->
</html>
